<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Тест Coffee Boom</title>
<style>
  body { font-family: Arial, sans-serif; background: #f8f4f0; padding: 20px; }
  h2 { color: #6b4226; }
  .hidden { display: none; }
  .question { margin-bottom: 15px; padding: 10px; background: #fff; border-radius: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
  button { padding: 10px 15px; background: #6b4226; color: #fff; border: none; border-radius: 5px; cursor: pointer; }
  button:hover { background: #8c5a35; }
</style>
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@2/dist/email.min.js"></script>
<script>
(function(){
  emailjs.init("bWlse3hihf2g0PqRK");
})();
</script>
</head>
<body>

<div id="step1">
  <h2>Введите ваши данные</h2>
  <label>Фамилия и Имя:</label><br>
  <input type="text" id="fio" required><br><br>
  <label>Локация:</label><br>
  <input type="text" id="location" required><br><br>
  <button onclick="startTest()">Начать тест</button>
</div>

<div id="step2" class="hidden">
  <h2>Тест Coffee Boom</h2>
  <form id="quizForm">
    <div class="question"><p>1. Через сколько секунд официант должен подойти к гостю после входа?</p><label><input type="radio" name="q1" value="a"> 15 секунд</label><br><label><input type="radio" name="q1" value="b"> 30 секунд</label><br><label><input type="radio" name="q1" value="c"> 1 минута</label><br><label><input type="radio" name="q1" value="d"> 2 минуты</label></div>
    <div class="question"><p>2. В каком порядке нужно приветствовать гостя в зависимости от времени суток?</p><label><input type="radio" name="q2" value="a"> Русский, потом казахский</label><br><label><input type="radio" name="q2" value="b"> Казахский, потом русский</label><br><label><input type="radio" name="q2" value="c"> Любой порядок</label><br><label><input type="radio" name="q2" value="d"> На одном языке</label></div>
    <div class="question"><p>3. Гость с детьми садится за стол. Что нужно сделать в первую очередь?</p><label><input type="radio" name="q3" value="a"> Принести меню</label><br><label><input type="radio" name="q3" value="b"> Принести детский стул и рассказать про детскую зону</label><br><label><input type="radio" name="q3" value="c"> Принести воду</label><br><label><input type="radio" name="q3" value="d"> Сразу принять заказ</label></div>
    <div class="question"><p>4. Если зал полный и нет мест?</p><label><input type="radio" name="q4" value="a"> Сказать «мест нет»</label><br><label><input type="radio" name="q4" value="b"> Предложить подождать и напиток/блюдо навынос</label><br><label><input type="radio" name="q4" value="c"> Попросить уйти</label><br><label><input type="radio" name="q4" value="d"> Посадить с другими</label></div>
    <div class="question"><p>5. Как предложить стол?</p><label><input type="radio" name="q5" value="a"> Садитесь, где хотите</label><br><label><input type="radio" name="q5" value="b"> Предложить 2–3 варианта</label><br><label><input type="radio" name="q5" value="c"> Показать зал</label><br><label><input type="radio" name="q5" value="d"> Дать выбрать любой</label></div>
    <div class="question"><p>6. Фраза, которую нельзя использовать?</p><label><input type="radio" name="q6" value="a"> Сколько вас будет?</label><br><label><input type="radio" name="q6" value="b"> Вы один/одна?</label><br><label><input type="radio" name="q6" value="c"> Добро пожаловать</label><br><label><input type="radio" name="q6" value="d"> Хотите у окна?</label></div>
    <div class="question"><p>7. Как подать меню?</p><label><input type="radio" name="q7" value="a"> В руки, открытым</label><br><label><input type="radio" name="q7" value="b"> Положить на стол</label><br><label><input type="radio" name="q7" value="c"> Дать закрытым</label><br><label><input type="radio" name="q7" value="d"> Показать со стороны</label></div>
    <div class="question"><p>8. Что сказать при подаче меню?</p><label><input type="radio" name="q8" value="a"> Ваше меню</label><br><label><input type="radio" name="q8" value="b"> Меню для вас</label><br><label><input type="radio" name="q8" value="c"> Выбирайте</label><br><label><input type="radio" name="q8" value="d"> Вот меню</label></div>
    <div class="question"><p>9. При загруженности холодного цеха и заказе салата?</p><label><input type="radio" name="q9" value="a"> Ждать 40 мин</label><br><label><input type="radio" name="q9" value="b"> Предложить горячее</label><br><label><input type="radio" name="q9" value="c"> Ничего не делать</label><br><label><input type="radio" name="q9" value="d"> Отменить заказ</label></div>
    <div class="question"><p>10. Правило полных рук?</p><label><input type="radio" name="q10" value="a"> Всегда носить поднос</label><br><label><input type="radio" name="q10" value="b"> Не идти с пустыми руками</label><br><label><input type="radio" name="q10" value="c"> Держать приборы</label><br><label><input type="radio" name="q10" value="d"> Подносить всё сразу</label></div>
    <div class="question"><p>11. Как держать бокал?</p><label><input type="radio" name="q11" value="a"> За нижнюю часть</label><br><label><input type="radio" name="q11" value="b"> За верх</label><br><label><input type="radio" name="q11" value="c"> За середину</label><br><label><input type="radio" name="q11" value="d"> Как удобно</label></div>
    <div class="question"><p>12. Что говорить при подаче первого курса?</p><label><input type="radio" name="q12" value="a"> Молча поставить</label><br><label><input type="radio" name="q12" value="b"> Презентовать и повернуть</label><br><label><input type="radio" name="q12" value="c"> Поставить в центр</label><br><label><input type="radio" name="q12" value="d"> Пожелать аппетита</label></div>
    <div class="question"><p>13. Когда предлагать повтор напитков?</p><label><input type="radio" name="q13" value="a"> Когда допьёт</label><br><label><input type="radio" name="q13" value="b"> Чуть раньше</label><br><label><input type="radio" name="q13" value="c"> По просьбе</label><br><label><input type="radio" name="q13" value="d"> Не предлагать</label></div>
    <div class="question"><p>14. Если блюдо в стоп-листе?</p><label><input type="radio" name="q14" value="a"> Сказать, что нет</label><br><label><input type="radio" name="q14" value="b"> Предложить альтернативу</label><br><label><input type="radio" name="q14" value="c"> Игнорировать</label><br><label><input type="radio" name="q14" value="d"> Предложить другое</label></div>
    <div class="question"><p>15. Как завершить обслуживание?</p><label><input type="radio" name="q15" value="a"> Поблагодарить и пригласить</label><br><label><input type="radio" name="q15" value="b"> Сказать «всего»</label><br><label><input type="radio" name="q15" value="c"> Молча убрать</label><br><label><input type="radio" name="q15" value="d"> Спросить, понравилось ли</label></div>
    <div class="question"><p>16. Вес «Цезарь с цыплёнком»?</p><label><input type="radio" name="q16" value="a"> 230 г</label><br><label><input type="radio" name="q16" value="b"> 315 г</label><br><label><input type="radio" name="q16" value="c"> 400 г</label><br><label><input type="radio" name="q16" value="d"> 290 г</label></div>
    <div class="question"><p>17. Время отдачи «Венского завтрака»?</p><label><input type="radio" name="q17" value="a"> 8 мин</label><br><label><input type="radio" name="q17" value="b"> 10 мин</label><br><label><input type="radio" name="q17" value="c"> 12 мин</label><br><label><input type="radio" name="q17" value="d"> 15 мин</label></div>
    <div class="question"><p>18. Состав «Венского завтрака»?</p><label><input type="radio" name="q18" value="a"> Омлет, колбаска, фри</label><br><label><input type="radio" name="q18" value="b"> Глазунья, колбаски, сарделька, салат, хлеб</label><br><label><input type="radio" name="q18" value="c"> Яичница, бекон, тосты</label><br><label><input type="radio" name="q18" value="d"> Панкейки с лососем</label></div>
    <div class="question"><p>19. Время приготовления сырников?</p><label><input type="radio" name="q19" value="a"> 5 мин</label><br><label><input type="radio" name="q19" value="b"> 8 мин</label><br><label><input type="radio" name="q19" value="c"> 11 мин</label><br><label><input type="radio" name="q19" value="d"> 15 мин</label></div>
    <div class="question"><p>20. Время отдачи клубного сэндвича?</p><label><input type="radio" name="q20" value="a"> 10 мин</label><br><label><input type="radio" name="q20" value="b"> 15 мин</label><br><label><input type="radio" name="q20" value="c"> 20 мин</label><br><label><input type="radio" name="q20" value="d"> 8 мин</label></div>
    <div class="question"><p>21. Состав «Шотландского завтрака»?</p><label><input type="radio" name="q21" value="a"> Глазунья, ветчина индейки, колбаски, салат, тосты</label><br><label><input type="radio" name="q21" value="b"> Омлет с колбаской, фри</label><br><label><input type="radio" name="q21" value="c"> Яичница с беконом</label><br><label><input type="radio" name="q21" value="d"> Панкейки с лососем</label></div>
    <div class="question"><p>22. Объявление готовности заказа?</p><label><input type="radio" name="q22" value="a"> Готово / Дайын</label><br><label><input type="radio" name="q22" value="b"> Заказ №... готов / Тапсырыс №... дайын</label><br><label><input type="radio" name="q22" value="c"> Подойдите / Келіңіз</label><br><label><input type="radio" name="q22" value="d"> Можно забирать / Алыңыз</label></div>
    <div class="question"><p>23. Как предупредить о 10% за обслуживание?</p><label><input type="radio" name="q23" value="a"> Только если спросит</label><br><label><input type="radio" name="q23" value="b"> Сообщить при посадке</label><br><label><input type="radio" name="q23" value="c"> Указать в чеке</label><br><label><input type="radio" name="q23" value="d"> Повесить табличку</label></div>
    <div class="question"><p>24. Минимальный рейтинг отзывов?</p><label><input type="radio" name="q24" value="a"> 4.0</label><br><label><input type="radio" name="q24" value="b"> 4.2</label><br><label><input type="radio" name="q24" value="c"> 4.5</label><br><label><input type="radio" name="q24" value="d"> 5.0</label></div>
    <div class="question"><p>25. Как принять телефонный заказ?</p><label><input type="radio" name="q25" value="a"> Алло</label><br><label><input type="radio" name="q25" value="b"> Представиться, уточнить заказ, допродажи</label><br><label><input type="radio" name="q25" value="c"> Сразу спросить заказ</label><br><label><input type="radio" name="q25" value="d"> Сообщить меню</label></div>
    <div class="question"><p>26. Гость просит обслуживание на казахском?</p><label><input type="radio" name="q26" value="a"> Попросить другого</label><br><label><input type="radio" name="q26" value="b"> Обслужить на казахском</label><br><label><input type="radio" name="q26" value="c"> Сказать, что не говорите</label><br><label><input type="radio" name="q26" value="d"> Продолжать на русском</label></div>
    <div class="question"><p>27. Если блюдо в стоп-листе?</p><label><input type="radio" name="q27" value="a"> Сказать, что нет</label><br><label><input type="radio" name="q27" value="b"> Извиниться, предложить альтернативу</label><br><label><input type="radio" name="q27" value="c"> Предложить любое</label><br><label><input type="radio" name="q27" value="d"> Игнорировать</label></div>
    <div class="question"><p>28. Как подать десерты?</p><label><input type="radio" name="q28" value="a"> В начале и конце, с отдельными приборами</label><br><label><input type="radio" name="q28" value="b"> Вместе с горячими</label><br><label><input type="radio" name="q28" value="c"> По просьбе</label><br><label><input type="radio" name="q28" value="d"> После расчёта</label></div>
    <div class="question"><p>29. Как вести себя с гостями с детьми?</p><label><input type="radio" name="q29" value="a"> Предложить детское меню, стул, рассказать о зоне</label><br><label><input type="radio" name="q29" value="b"> Игнорировать</label><br><label><input type="radio" name="q29" value="c"> Дать взрослое меню</label><br><label><input type="radio" name="q29" value="d"> Попросить тишину</label></div>
    <div class="question"><p>30. Финальное прощание?</p><label><input type="radio" name="q30" value="a"> Поблагодарить, пожелать дня, пригласить</label><br><label><input type="radio" name="q30" value="b"> Сказать «до свидания»</label><br><label><input type="radio" name="q30" value="c"> Молча убрать</label><br><label><input type="radio" name="q30" value="d"> Спросить про чаевые</label></div>
  </form>
  <button onclick="submitQuiz()">Отправить</button>
</div>

<div id="step3" class="hidden">
  <h2>Результат</h2>
  <p id="score"></p>
  <p><strong>Ошибки:</strong></p>
  <ul id="wrongList"></ul>
</div>

<script>
  const correctAnswers = {
    q1:'b', q2:'b', q3:'b', q4:'b', q5:'b',
    q6:'b', q7:'a', q8:'b', q9:'b', q10:'b',
    q11:'a', q12:'b', q13:'b', q14:'b', q15:'a',
    q16:'b', q17:'b', q18:'b', q19:'c', q20:'a',
    q21:'a', q22:'b', q23:'b', q24:'c', q25:'b',
    q26:'b', q27:'b', q28:'a', q29:'a', q30:'a'
  };

  function startTest() {
    const fio = document.getElementById("fio").value.trim();
    const location = document.getElementById("location").value.trim();
    if (!fio || !location) {
      alert("Пожалуйста, заполните все поля");
      return;
    }
    document.getElementById("step1").classList.add("hidden");
    document.getElementById("step2").classList.remove("hidden");
  }

  function submitQuiz() {
    const fio = document.getElementById("fio").value;
    const location = document.getElementById("location").value;
    const form = document.getElementById("quizForm");
    let score = 0;
    let wrongAnswers = [];
    let chosenAnswers = [];
    let total = Object.keys(correctAnswers).length;

    for (let key in correctAnswers) {
      let answer = form.querySelector(`input[name="${key}"]:checked`);
      if (answer) {
        chosenAnswers.push(`${key}: ${answer.value}`);
        if (answer.value === correctAnswers[key]) {
          score++;
        } else {
          wrongAnswers.push(`Вопрос ${key}`);
        }
      } else {
        wrongAnswers.push(`Вопрос ${key} (не отвечен)`);
      }
    }

    let percent = Math.round((score / total) * 100);

    document.getElementById("score").textContent = `Ваш результат: ${percent}% правильных ответов`;
    const wrongListEl = document.getElementById("wrongList");
    wrongListEl.innerHTML = "";
    wrongAnswers.forEach(item => {
      let li = document.createElement("li");
      li.textContent = item;
      wrongListEl.appendChild(li);
    });

    document.getElementById("step2").classList.add("hidden");
    document.getElementById("step3").classList.remove("hidden");

    emailjs.send("service_3jhsam6", "template_bjg5viw", {
      fio: fio,
      location: location,
      score: percent,
      wrongAnswers: wrongAnswers.join(", "),
      chosenAnswers: chosenAnswers.join(", ")
    }).then(function(response) {
      console.log("Результаты отправлены", response.status, response.text);
    }, function(error) {
      console.error("Ошибка отправки", error);
    });
  }
</script>

</body>

</html>
